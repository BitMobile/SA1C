
Procedure BeforeWrite(Cancel)
	
	If Not Cancel Then 
		
		If Not Role = "Admin" Then 
			
			Role = "SR";
			
			If RoleOfUser.Role = "Unknown" Then 
				
				Role = "Unknown";
				
			ElsIf RoleOfUser.Role = "SRM" Then
				
				Role = "SRM";
				
			EndIf;
			
		EndIf;
		
		// Создать пользователя и установить UserID
		Parameters = New Structure();
		Parameters.Insert("FullName", Description);
		Parameters.Insert("UserName", UserName);
		Parameters.Insert("UserID", UserID);
		Parameters.Insert("Role", Role);
		Parameters.Insert("Password", Password);
		Parameters.Insert("InterfaceLanguage", InterfaceLanguage);
		
		UserID = Users.CreateUser(Parameters);
		
	EndIf;
	
EndProcedure






