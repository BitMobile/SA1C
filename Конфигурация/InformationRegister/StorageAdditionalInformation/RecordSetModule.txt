
Procedure OnWrite(Cancel, Replacing)
	
	If Not Cancel Then 
	
		If ValueIsFilled(ThisObject.Filter.Object.Value) 
			And TypeOf(ThisObject.Filter.Object.Value) = Type("CatalogRef.Outlet") 
			And ThisObject.Filter.SyncDirection.Value = Enums.SyncDirections.Shared Then 
			
			NeedWrite = False;
			
			OutletObject = ThisObject.Filter.Object.Value.GetObject();
			
			UUIDValue = TrimAll(String(ThisObject.Filter.FileName.Value));
			
			For Each SnapshotStr In OutletObject.Snapshots Do 
				
				If TrimAll(SnapshotStr.FileName) = UUIDValue Then 
					
					If SnapshotStr.Unavailable Then 
						
						NeedWrite = True;
						
						SnapshotStr.Unavailable = False;
						
					EndIf;
					
				EndIf;
				
			EndDo;
			
			If NeedWrite Then 
				
				Try
					
					OutletObject.Write();
					
				Except
				
				EndTry; 
				
			EndIf;
			
		EndIf;
		
	EndIf;
	
EndProcedure


